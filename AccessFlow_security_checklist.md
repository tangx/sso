# 访问流向安全 checklist

通过数据流动为导向， 确认每个流经环节的信息和安全策略。 

从而达到避免以后的目录


## 基础安全

> 基础安全规则适用于所有系统和业务场景

1. 密码为复杂密码
    + 尽量使用证书登录，而非密码验证
    + 大小写+数字+字符，不低于 12 位
2. 服务器访问限制 (参考防火墙配置)
    + 仅保留服务器可以通过可信地址登录
3. 密码是否定期更换
    + 根据安全级别不同，一般 `1,3,6` 个约更换一次

## 入口

1. 整理并确认网络入口信息
    + 公网IP / 运营商 / 联系方式联系人
    + 项目或业务使用的域名访问地址
    + 对外暴露的`端口`及`防火墙访问策略`
        - **注意: 所有
    + 安全设备和策略 ( DDos / Waf / ACL )
    + 后端硬件设备

# 业务机器

1. 软件实现的 `负载均衡 / 高可用` , 端口转发 
    + ex. nginx
    + keepalived
    + haproxy
    + ipvs
    ..

> 注: 检查方式可以按照以下标准执行

2. 查看操作系统信息
    + 操作系统版本
        + lsb_release -a 或 cat /etc/issus 或 cat /etc/redhat-release
        + https://zh.wikihow.com/查看Windows系统的版本信息 (windows)
    + 操作系统监听的端口, 检查是有一场程序
        + netstat -tunpl  (linux)
        + netstat -ano  (windows)
    + 操作系统内是否有非业务进程
        + ps -ef 
        + https://zh.wikihow.com/打开任务管理器
    + 业务程序使用非特权用户( root / Administrator ) 登录启动

3. 确认业务程序环境，程序版本
    + ex. tomcat7.3
    + ex. mysql5.5
    + ex. jdk1.7

4. 确认程序部署信息
    + 部署目录
        + 要求统一规范 ( ex. /data/app/tomcat1 )
    + 依赖关系
        + 配置文件中依赖关系
            + ex. 数据库访问信息
            + ex. 其他系统的 api 调用
    + 定时任务

5. 应用端口可被访问的来源地址。
    + 集群内部
        + 数据库类端口 ( 3306 / 1433 / 6379 )
        + 后端接口
    + 可限定来源的外部访问 （ 例如有固定IP , 友商/政府 ）
        + 某些接口
    + 需要直面公网访问的
        + web 类应用   (ex. 8080/80)
        + 数据上报端口  (ex. 4399)

6. 确认网络环境
    + 本机 IP 地址
        + ifconfig (linux)
        + ipconfig (windows)
    + 防火墙策略，确认是否根据 **3** 的需要，配置相应防火墙策略
        + /etc/init.d/iptables status / firewall-cmd --list-all (linxu centos : https://blog.51cto.com/jschu/1692863)
        + ufw status （linux ubuntu/debian: https://www.jianshu.com/p/6dc966f48b1f) 
        + https://zh.wikihow.com/通过Windows防火墙拦截程序 （windows）


## 数据安全和敏感等级

### 备份等级
1. 数据保密级别
    + 绝密: 泄露或丢失会使公司业务安全和利益遭受特别严重的损害 （30年）
    + 机密: 泄露或丢失会使公司业务安全和利益遭受严重的损害 （20年）
    + 秘密: 泄露或丢失会使公司业务安全和利益遭受损害 （10年）
    + 重要: 泄露或丢失会影响公司业务正常展开
    + 不重要:  泄露或丢失不会使公司业务正常展开

### 备份策略

1. 备份文件是否有经过加密处理 （尤其是备份需要存放在第三方平台上）

1. 是否有数据备份策略。 
    + 实时备份，定时备份
    + 全量备份，增量备份
    + 备份副本数量
1. 数据存储是否考虑冗灾策略。
    + 不同地域
    + 不同供应商
    + 不同网络环境
    + 不同存储介质
    ...
1. 备份数据是否有做校验
    + SHA 完整性校验
    + 数据恢复策略及可用性测试

### 备份恢复测试
1. 是否有历史备份数据防止覆盖策略
1. 是否有历史备份数据归档/删除策略
1. 是否有灾难恢复演练
